<div class="adminpage-container">
  <div class="form-container">
    <h1 class="form-header">
      {{ mode === 'create' ? 'Create ' + (config?.title || 'Entity') : 'Update ' + (config?.title || 'Entity') }}
    </h1>

    @if (config) {
      <form (ngSubmit)="onSubmit()">
        <!-- Loop through fields from config -->
        @for (field of config.fields; track field) {
          <div class="form-group">
            <label [for]="field.key">{{ field.label }}</label>
            <input [id]="field.key" class="form-control" [(ngModel)]="entity[field.key]" [name]="field.key"
              [readonly]="field.readonly || false" [type]="field.type || 'text'"
              [required]="field.required || false" />
              @if (errors[field.key]) {
                <span class="text-danger">{{ errors[field.key] }}</span>
              }
            </div>
          }
          <div class="button-group">
            <button type="submit" class="btn btn-primary">
              {{ mode === 'create' ? 'Create' : 'Update' }}
            </button>
            <a class="btn btn-outline-primary" routerLink="/adminpage">Cancel</a>
          </div>
        </form>
      }

      <!-- Success / Error Messages -->
      @if (successMessage) {
        <div class="alert alert-success">
          {{ successMessage }}
        </div>
      }
      @if (errorMessage) {
        <div class="alert alert-danger">
          {{ errorMessage }}
        </div>
      }
    </div>
  </div>
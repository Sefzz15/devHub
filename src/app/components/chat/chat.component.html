<div class="container">
  <!-- <h1>Chat Application</h1> -->
  <div class="chat-container">


    <div class="chatInfo">
      <div class="connected-users">
        <h3>Connected Users:</h3>
        <ul>
          @for (user of connectedUsers; track user) {
            <li>{{ user }}</li>
          }
        </ul>
      </div>

      <div class="groups-list">
        <h3>Available Groups:</h3>
        <ul>
          @for (group of chatGroups; track group) {
            <li [class.active]="group === currentGroup">
              <span (click)="joinGroup(group)">{{ group }}</span>
              @if (currentGroup === group) {
                <button (click)="leaveGroup(group)">Leave</button>
              }
            </li>
          }
        </ul>
      </div>

      <div class="group-controls">
        <input type="text" [(ngModel)]="currentGroup" placeholder="Enter group name..." />
        <button (click)="joinGroup(currentGroup)" [disabled]="!currentGroup.trim()">Join</button>
        <button (click)="leaveGroup(currentGroup)" [disabled]="!currentGroup.trim()">Leave</button>
      </div>

    </div>

    <div class="b">
      <div class="chat-window" #chatWindow>
        @for (message of messages; track message) {
          <div [class]="message.isSender ? 'bubble sender' : 'bubble receiver'">
            <p>{{ message.text }}</p>
          </div>
        }
      </div>

      <div class="input-area">
        @if (unreadCount > 0) {
          <div class="unread-count">
            {{ unreadCount }}
          </div>
        }
        <input type="text" placeholder="Type your message..." [(ngModel)]="messageInput" (keydown.enter)="sendMessage()"
          (focus)="onInputFocus()" />
          <button class="btn btn-primary" (click)="sendMessage()">Send</button>
        </div>
      </div>
    </div>

  </div>